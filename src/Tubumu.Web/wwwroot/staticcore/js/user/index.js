webpackJsonp([13],{"Q+Zd":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("7+uW"),r=a("/ocq"),o=a("uzdP");i.default.use(r.a);var n=[{path:"/",name:"app",component:o.a}],s=new r.a({routes:n});t.default=s},VsUZ:function(e,t,a){"use strict";var i=a("7+uW");t.a={login:function(e){return i.default.httpClient.post("/admin/login",e)},refreshToken:function(e){return i.default.httpClient.post("/admin/refreshToken",e)},logout:function(){return i.default.httpClient.post("/admin/logout")},getProfile:function(){return i.default.httpClient.get("/admin/getProfile")},changeProfile:function(e){return i.default.httpClient.post("/admin/changeProfile",e)},changeAvatar:function(e){return i.default.uploadHttpClient.post("/admin/ChangeAvatar",e)},changeLogo:function(e){return i.default.uploadHttpClient.post("/admin/ChangeLogo",e)},changePassword:function(e){return i.default.httpClient.post("/admin/changePassword",e)},getMenus:function(){return i.default.httpClient.get("/admin/getMenus")},getBulletin:function(){return i.default.httpClient.get("/admin/getBulletin")},editBulletin:function(e){return i.default.httpClient.post("/admin/editBulletin",e)},getModuleMetaDatas:function(){return i.default.httpClient.get("/admin/getModuleMetaDatas")},extractModuleMetaDatas:function(){return i.default.httpClient.get("/admin/extractModuleMetaDatas")},clearModulePermissions:function(){return i.default.httpClient.get("/admin/clearModulePermissions")},getRoleList:function(){return i.default.httpClient.get("/admin/getRoleList")},addRole:function(e){return i.default.httpClient.post("/admin/addRole",e)},editRole:function(e){return i.default.httpClient.post("/admin/editRole",e)},removeRole:function(e){return i.default.httpClient.post("/admin/removeRole",e)},moveRole:function(e){return i.default.httpClient.post("/admin/moveRole",e)},saveRoleName:function(e){return i.default.httpClient.post("/admin/saveRoleName",e)},getGroupTree:function(){return i.default.httpClient.get("/admin/getGroupTree")},addGroup:function(e){return i.default.httpClient.post("/admin/addGroup",e)},editGroup:function(e){return i.default.httpClient.post("/admin/editGroup",e)},removeGroup:function(e){return i.default.httpClient.post("/admin/removeGroup",e)},moveGroup:function(e){return i.default.httpClient.post("/admin/moveGroup",e)},getUserPage:function(e){return i.default.httpClient.post("/admin/getUserPage",e)},addUser:function(e){return i.default.httpClient.post("/admin/addUser",e)},editUser:function(e){return i.default.httpClient.post("/admin/editUser",e)},removeUser:function(e){return i.default.httpClient.post("/admin/removeUser",e)},getUserStatuList:function(){return i.default.httpClient.get("/admin/getUserStatuList")},changeUserAvatar:function(e){return i.default.uploadHttpClient.post("/admin/ChangeUserAvatar",e)},changeUserLogo:function(e){return i.default.uploadHttpClient.post("/admin/ChangeUserLogo",e)},getNotificationsForManager:function(e){return i.default.httpClient.post("/admin/getNotificationsForManager",e)},addNotification:function(e){return i.default.httpClient.post("/admin/addNotification",e)},editNotification:function(e){return i.default.httpClient.post("/admin/editNotification",e)},removeNotification:function(e){return i.default.httpClient.post("/admin/removeNotification",e)},getNotifications:function(e){return i.default.httpClient.post("/admin/getNotifications",e)},readNotifications:function(e){return i.default.httpClient.post("/admin/readNotifications",e)},deleteNotifications:function(e){return i.default.httpClient.post("/admin/deleteNotifications",e)},getNewestNotification:function(e){return i.default.httpClient.post("/admin/getNewestNotification",e)},getGroupList:function(){return i.default.httpClient.get("/admin/getGroupList")},getRoleBaseList:function(){return i.default.httpClient.get("/admin/getRoleBaseList")},getPermissionTree:function(){return i.default.httpClient.get("/admin/getPermissionTree")},callDirectly:function(e){return i.default.httpClient.get(e)},download:function(e,t){return i.default.httpClient.post(e,t,{responseType:"arraybuffer"})}}},dZjg:function(e,t,a){"use strict";var i=a("BO1k"),r=a.n(i),o=a("VsUZ"),n=a("M4fF"),s=a.n(n),l=a("NC6I"),m=a.n(l);t.a={data:function(){var e=this;return{isLoading:!1,activeTabName:"first",page:{list:null,totalItemCount:null,totalPageCount:null},isSearchCriteriaFormExpand:!1,searchCriteriaForm:{keyword:null,groupIds:null,creationTime:null,creationTimeBegin:null,creationTimeEnd:null,status:null,groupIdPath:[],pagingInfo:{pageNumber:1,pageSize:20,isExcludeMetaData:!1,sortInfo:{sort:"userId",sortDir:"ASC"}}},removeActive:null,uploadImageTypeId:null,uploadImageDialogVisible:!1,uploadImagePreviewUrl:null,uploadImageForm:{userId:null},editActive:null,mainFormDialogVisible:!1,mainForm:{userId:null,status:null,username:null,displayName:null,realName:null,realNameIsValid:!1,email:null,emailIsValid:!1,mobile:null,mobileIsValid:!1,groupIdPath:[],groupId:null,groupIds:[],roleId:null,roleIds:[],permissionIds:null,password:null,passwordConfirm:null,description:null,isDeveloper:!1,isTester:!1},mainFormRules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"},{max:20,message:"最多支持20个字符",trigger:"blur"}],displayName:[{max:20,message:"最多支持20个字符",trigger:"blur"}],realName:[{max:100,message:"最多支持100个字符",trigger:"blur"}],mobile:[{pattern:/^1\d{10}$/,message:"请输入正确的手机号码",trigger:"blur"}],email:[{pattern:/^(\w-*\.*)+@(\w-?)+(\.\w{2,})+$/,message:"请输入正确的邮箱",trigger:"blur"}],groupIdPath:[{required:!0,type:"array",message:"请选择主要分组",trigger:"change"}],password:[{validator:function(t,a,i){!e.editActive||a&&0!==a.length||i(),a?a.length<6?i(new Error("请输入至少6位密码")):a.length>32?i(new Error("密码请保持在32位以内")):i():i(new Error("请输入登录密码"))},trigger:"blur"}],passwordConfirm:[{validator:function(t,a,i){!e.editActive||e.mainForm.password&&0!==e.mainForm.password.length||i(),a?a!==e.mainForm.password?i(new Error("两次输入密码不一致!")):i():i(new Error("请输入确认密码"))},trigger:"blur"}]},editPermissionTreeData:null,editPermissionTreeDefaultProps:{children:"children",label:"name"},editGroupRoleListData:null,editRoleListData:null,editGroupTreeData:[],editGroupTreeDefaultProps:{children:"children",value:"id",label:"name"}}},mounted:function(){this.getPage(),this.getGroupTree(),this.getRoleBaseList(),this.getPermissionTree()},computed:{mainTableEmptyText:function(){return this.isLoading?"加载中...":"暂无数据"}},watch:{},methods:{getPage:function(){var e=this;this.isLoading=!0;var t=this.searchCriteriaForm;o.a.getUserPage(t).then(function(t){e.isLoading=!1,e.page=t.data.data},function(t){e.isLoading=!1,e.$message.error(t.message)})},handlePaginationSizeChange:function(e){this.searchCriteriaForm.pagingInfo.pageSize=e,this.searchCriteriaForm.pagingInfo.pageNumber=1,this.getPage()},handlePaginationCurrentChange:function(e){this.searchCriteriaForm.pagingInfo.pageNumber=e,this.getPage()},getGroupTree:function(){var e=this;o.a.getGroupTree().then(function(t){e.editGroupTreeData=t.data.data},function(t){e.$message.error(t.message)})},getRoleBaseList:function(){var e=this;o.a.getRoleBaseList().then(function(t){e.editRoleListData=t.data.data},function(t){e.$message.error(t.message)})},getPermissionTree:function(){var e=this;o.a.getPermissionTree().then(function(t){e.editPermissionTreeData=t.data.data},function(t){e.$message.error(t.message)})},handleSearchAll:function(){this.searchCriteriaForm.pagingInfo.pageNumber=1,this.searchCriteriaForm.keyword=null,this.searchCriteriaForm.groupIds=null,this.searchCriteriaForm.creationTime=null,this.searchCriteriaForm.creationTimeBegin=null,this.searchCriteriaForm.creationTimeEnd=null,this.searchCriteriaForm.status=null,this.searchCriteriaForm.groupIdPath=[],this.getPage()},handleSearch:function(){this.searchCriteriaForm.pagingInfo.pageNumber=1,this.searchCriteriaForm.creationTime&&2===this.searchCriteriaForm.creationTime.length&&(this.searchCriteriaForm.creationTimeBegin=this.searchCriteriaForm.creationTime[0],this.searchCriteriaForm.creationTimeEnd=this.searchCriteriaForm.creationTime[1]),this.searchCriteriaForm.groupIds=this.searchCriteriaForm.groupIdPath&&this.searchCriteriaForm.groupIdPath.length?[this.searchCriteriaForm.groupIdPath[this.searchCriteriaForm.groupIdPath.length-1]]:null,this.getPage()},handleAdd:function(){var e=this;this.validateBaseData()&&(this.activeTabName="first",this.editActive=null,this.mainFormDialogVisible=!0,this.mainForm.userId=null,this.mainForm.status="Normal",this.mainForm.username=null,this.mainForm.displayName=null,this.mainForm.realName=null,this.mainForm.realNameIsValid=!1,this.mainForm.email=null,this.mainForm.emailIsValid=!1,this.mainForm.mobile=null,this.mainForm.mobileIsValid=!1,this.mainForm.groupIdPath=[],this.mainForm.groupId=null,this.mainForm.groupIds=[],this.mainForm.roleId=null,this.editGroupRoleListData=[],this.mainForm.roleIds=[],this.mainForm.permissionIds=null,this.mainForm.password=null,this.mainForm.passwordConfirm=null,this.mainForm.description=null,this.mainForm.isDeveloper=!1,this.mainForm.isTester=!1,this.$nextTick(function(){e.$refs.editGroupTree.setCheckedKeys([],!0),e.$refs.editPermissionTree.setCheckedKeys([],!0),e.clearValidate("mainForm")}))},handleEdit:function(e){var t=this;console.log("handleEdit",e),this.validateBaseData()&&e&&(this.activeTabName="first",this.editActive=e,this.mainFormDialogVisible=!0,this.mainForm.userId=e.userId,this.mainForm.status=e.status,this.mainForm.username=e.username,this.mainForm.displayName=e.displayName,this.mainForm.realName=e.realName,this.mainForm.realNameIsValid=e.realNameIsValid,this.mainForm.email=e.email,this.mainForm.emailIsValid=e.emailIsValid,this.mainForm.mobile=e.mobile,this.mainForm.mobileIsValid=e.mobileIsValid,this.getGroupIdPath(this.editGroupTreeData,e.group.groupId),this.mainForm.groupId=e.group.groupId,this.mainForm.groupIds=e.groups.map(function(e){return e.groupId}),this.mainForm.roleId=e.role?e.role.roleId:null,this.getGroupAvailableRoles(this.editGroupTreeData,e.group.groupId),this.mainForm.roleIds=e.roles.map(function(e){return e.roleId}),this.mainForm.permissionIds=e.permissions.map(function(e){return e.permissionId}),this.mainForm.password=null,this.mainForm.passwordConfirm=null,this.mainForm.description=e.description,this.mainForm.isDeveloper=e.isDeveloper,this.mainForm.isTester=e.isTester,this.$nextTick(function(){t.$refs.editGroupTree.setCheckedKeys(t.mainForm.groupIds,!0),t.$refs.editPermissionTree.setCheckedKeys(t.mainForm.permissionIds,!0),t.clearValidate("mainForm")}))},handleMainFormSure:function(e){console.log("handleMainFormSure",e),e?this.editActive?this.edit():this.add():this.mainFormDialogVisible=!1},handleRemove:function(e){var t=this;this.removeActive=e,this.$confirm("删除该用户后，相关的数据也将被删除。是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.remove()}).catch(function(){t.removeActive=null})},handleGroupCascaderChange:function(e){console.log(e),this.mainForm.roleId=null,this.editGroupRoleListData=[],0!==e.length&&this.getGroupAvailableRoles(this.editGroupTreeData,e[e.length-1])},add:function(){var e=this;this.$refs.mainForm.validate(function(t){if(!t)return!1;e.isLoading=!0,e.mainForm.groupId=e.mainForm.groupIdPath[e.mainForm.groupIdPath.length-1];var a=s.a.cloneDeep(e.mainForm);e.params.password&&(a.password=m()(a.password)),a.passwordConfirm&&(a.passwordConfirm=m()(a.passwordConfirm)),o.a.addUser(a).then(function(t){e.isLoading=!1,e.mainFormDialogVisible=!1,e.getPage()},function(t){e.isLoading=!1,e.$message.error(t.message)})})},edit:function(){var e=this;this.editActive?this.$refs.mainForm.validate(function(t){if(!t)return!1;e.isLoading=!0,e.mainForm.groupId=e.mainForm.groupIdPath[e.mainForm.groupIdPath.length-1];var a=s.a.cloneDeep(e.mainForm);a.password&&(a.password=m()(a.password)),a.passwordConfirm&&(a.passwordConfirm=m()(a.passwordConfirm)),o.a.editUser(a).then(function(t){e.isLoading=!1,e.editActive=null,e.mainFormDialogVisible=!1,e.getPage()},function(t){e.isLoading=!1,e.$message.error(t.message)})}):this.$message.error("异常：无编辑目标")},remove:function(){var e=this;if(this.removeActive){var t={userId:this.removeActive.userId};this.isLoading=!0,o.a.removeUser(t).then(function(t){e.isLoading=!1,e.removeActive=null,e.getPage()},function(t){e.isLoading=!1,e.$message.error(t.message)})}},validateBaseData:function(){return this.editGroupTreeData&&0!==this.editGroupTreeData.length?this.editRoleListData?!!this.editPermissionTreeData||(this.$message.error("基础数据缺失：权限列表"),!1):(this.$message.error("基础数据缺失：角色列表"),!1):(this.$message.error("基础数据缺失：分组列表"),!1)},handleGroupTreeCheckChange:function(e,t,a){this.mainForm.groupIds=this.$refs.editGroupTree.getCheckedKeys()},handlePermissionTreeCheckChange:function(e,t,a){this.mainForm.permissionIds=this.$refs.editPermissionTree.getCheckedKeys()},getGroupIdPath:function(e,t){if(e){var a=!0,i=!1,o=void 0;try{for(var n,s=r()(e);!(a=(n=s.next()).done);a=!0){var l=n.value;if(l.id===t){this.mainForm.groupIdPath=l.parentIdPath?l.parentIdPath.concat():[],this.mainForm.groupIdPath.push(t);break}this.getGroupIdPath(l.children,t)}}catch(e){i=!0,o=e}finally{try{!a&&s.return&&s.return()}finally{if(i)throw o}}}},getGroupAvailableRoles:function(e,t){if(this.editGroupRoleListData=[],e){var a=!0,i=!1,o=void 0;try{for(var n,s=r()(e);!(a=(n=s.next()).done);a=!0){var l=n.value;if(l.id===t){this.editGroupRoleListData=l.availableRoles;break}this.getGroupAvailableRoles(l.children,t)}}catch(e){i=!0,o=e}finally{try{!a&&s.return&&s.return()}finally{if(i)throw o}}}},resetForm:function(e){this.$refs[e].resetFields()},clearValidate:function(e){this.$refs[e].clearValidate()},handleSortChange:function(e){this.searchCriteriaForm.pagingInfo.sortInfo.sort=e.prop,this.searchCriteriaForm.pagingInfo.sortInfo.sortDir="descending"===e.order?"DESC":"ASC",this.searchCriteriaForm.pagingInfo.pageNumber=1,this.getPage()},handleChangeAvatar:function(e){this.handleChangeImage(e,1)},handleChangeLogo:function(e){this.handleChangeImage(e,2)},handleChangeImage:function(e,t){this.uploadImageTypeId=t,this.uploadImageForm.userId=e.userId;var a=1===t?e.avatarUrl:e.logoUrl;this.uploadImagePreviewUrl=a?a+"?"+(new Date).getTime():null,this.uploadImageDialogVisible=!0},beforeUpload:function(e){console.log("beforeUpload");var t="image/jpeg"===e.type||"image/png"===e.type,a=e.size/1024/1024<1;return t||this.$message.error("上传图片只能是 JPG 或 PNG 格式"),a||this.$message.error("上传图片大小不能超过 1MB"),t&&a},uploadImage:function(e){var t=this;if(1===this.uploadImageTypeId||2===this.uploadImageTypeId){this.isLoading=!0;var a=new FormData;a.append("userId",this.uploadImageForm.userId),a.append("file",e.file);(1===this.uploadImageTypeId?o.a.changeUserAvatar:o.a.changeUserLogo)(a).then(function(e){t.isLoading=!1,t.uploadImagePreviewUrl=e.data.url+"?"+(new Date).getTime(),t.getPage()},function(e){t.isLoading=!1,t.$message.error(e.message)})}else this.$message.error("未知图片类型")}}}},iFzH:function(e,t,a){"use strict";var i={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:e.isLoading,expression:"isLoading",modifiers:{fullscreen:!0,lock:!0}}]},[a("el-header",{staticClass:"header"},[a("el-breadcrumb",{staticClass:"breadcrumb",attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[e._v("用户管理")]),e._v(" "),a("el-breadcrumb-item",[e._v("用户列表")])],1)],1),e._v(" "),a("el-main",{staticClass:"main"},[a("el-form",{ref:"searchCriteriaForm",staticClass:"searchCriteriaForm",attrs:{model:e.searchCriteriaForm,inline:""}},[a("el-row",[a("el-form-item",[a("el-input",{staticClass:"filterText",attrs:{placeholder:"关键字(用户名/真实名称/昵称/邮箱/手机号)",clearable:""},model:{value:e.searchCriteriaForm.keyword,callback:function(t){e.$set(e.searchCriteriaForm,"keyword",t)},expression:"searchCriteriaForm.keyword"}})],1),e._v(" "),a("el-form-item",[a("el-cascader",{attrs:{options:e.editGroupTreeData,props:e.editGroupTreeDefaultProps,clearable:"","change-on-select":"",filterable:"",placeholder:"分组"},model:{value:e.searchCriteriaForm.groupIdPath,callback:function(t){e.$set(e.searchCriteriaForm,"groupIdPath",t)},expression:"searchCriteriaForm.groupIdPath"}})],1),e._v(" "),a("el-form-item",[a("xl-userStatusSelect",{model:{value:e.searchCriteriaForm.status,callback:function(t){e.$set(e.searchCriteriaForm,"status",t)},expression:"searchCriteriaForm.status"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{plain:"",icon:e.isSearchCriteriaFormExpand?"el-icon-caret-top":"el-icon-caret-bottom"},on:{click:function(t){e.isSearchCriteriaFormExpand=!e.isSearchCriteriaFormExpand}}}),e._v(" "),a("el-button-group",[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:function(t){return e.handleSearch()}}},[e._v("搜索")]),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:function(t){return e.handleSearchAll()}}},[e._v("全部")])],1),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-circle-plus-outline"},on:{click:function(t){return e.handleAdd()}}},[e._v("添加")])],1)],1),e._v(" "),a("el-row",{directives:[{name:"show",rawName:"v-show",value:e.isSearchCriteriaFormExpand,expression:"isSearchCriteriaFormExpand"}]},[a("el-form-item",[a("xl-datePicker",{model:{value:e.searchCriteriaForm.creationTime,callback:function(t){e.$set(e.searchCriteriaForm,"creationTime",t)},expression:"searchCriteriaForm.creationTime"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.page.list,"empty-text":e.mainTableEmptyText},on:{"sort-change":e.handleSortChange}},[a("el-table-column",{attrs:{prop:"userId",label:"#",width:"60",sortable:"custom"}}),e._v(" "),a("el-table-column",{attrs:{prop:"username",label:"用户名",width:"160",sortable:"custom"}}),e._v(" "),a("el-table-column",{attrs:{prop:"group.name",label:"分组",width:"160"}}),e._v(" "),a("el-table-column",{attrs:{label:"角色",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.role?t.row.role.name:""))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"displayName",label:"昵称",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{label:"真实名称",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("i",{directives:[{name:"show",rawName:"v-show",value:t.row.realName&&!t.row.realNameIsValid,expression:"scope.row.realName && !scope.row.realNameIsValid"}],staticClass:"el-icon-question"}),e._v(" "),a("span",[e._v(e._s(t.row.realName))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"手机号码",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("i",{directives:[{name:"show",rawName:"v-show",value:t.row.mobile&&!t.row.mobileIsValid,expression:"scope.row.mobile && !scope.row.mobileIsValid"}],staticClass:"el-icon-question"}),e._v(" "),a("span",[e._v(e._s(t.row.mobile))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"Email",width:"140"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("i",{directives:[{name:"show",rawName:"v-show",value:t.row.email&&!t.row.emailIsValid,expression:"scope.row.email && !scope.row.emailIsValid"}],staticClass:"el-icon-question"}),e._v(" "),a("span",[e._v(e._s(t.row.email))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"statusText",label:"状态",width:"60"}}),e._v(" "),a("el-table-column",{attrs:{prop:"creationTime",label:"创建时间",width:"160"}}),e._v(" "),a("el-table-column",{attrs:{label:"开发",width:"60"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(t.row.isDeveloper?"√":"×")+"\n          ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"测试",width:"60"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(t.row.isTester?"√":"×")+"\n          ")]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",fixed:"right",width:"126"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small",icon:"el-icon-news"},on:{click:function(a){return e.handleChangeAvatar(t.row)}}}),e._v(" "),a("el-button",{attrs:{type:"text",size:"small",icon:"el-icon-picture-outline"},on:{click:function(a){return e.handleChangeLogo(t.row)}}}),e._v(" "),a("el-button",{attrs:{type:"text",size:"small",icon:"el-icon-edit"},on:{click:function(a){return e.handleEdit(t.row)}}}),e._v(" "),a("el-button",{attrs:{type:"text",size:"small",icon:"el-icon-delete"},on:{click:function(a){return e.handleRemove(t.row)}}})]}}])})],1)],1),e._v(" "),a("el-dialog",{attrs:{visible:e.uploadImageDialogVisible,"close-on-click-modal":!1,width:"200px"},on:{"update:visible":function(t){e.uploadImageDialogVisible=t}},nativeOn:{submit:function(e){e.preventDefault()}}},[a("span",{attrs:{slot:"title"},slot:"title"},[e._v("\n          "+e._s(1===this.uploadImageTypeId?"修改用户头像":"修改用户 Logo")+"\n        ")]),e._v(" "),a("el-upload",{ref:"uploader",staticClass:"uploader",attrs:{action:"","auto-upload":!0,"show-file-list":!1,"before-upload":e.beforeUpload,"http-request":e.uploadImage}},[e.uploadImagePreviewUrl?a("img",{staticClass:"uploaderPreview",attrs:{src:e.uploadImagePreviewUrl}}):a("i",{staticClass:"el-icon-plus uploader-icon"})])],1),e._v(" "),a("el-dialog",{attrs:{visible:e.mainFormDialogVisible,"close-on-click-modal":!1,width:"600px"},on:{"update:visible":function(t){e.mainFormDialogVisible=t}},nativeOn:{submit:function(e){e.preventDefault()}}},[a("span",{attrs:{slot:"title"},slot:"title"},[e._v("\n        "+e._s(e.editActive?"编辑":"添加")+"\n      ")]),e._v(" "),a("el-form",{ref:"mainForm",attrs:{model:e.mainForm,rules:e.mainFormRules,"label-position":"right","label-width":"160px"}},[a("el-tabs",{attrs:{type:"card"},model:{value:e.activeTabName,callback:function(t){e.activeTabName=t},expression:"activeTabName"}},[a("el-tab-pane",{attrs:{label:"基本信息",name:"first"}},[a("el-form-item",{attrs:{label:"主要分组",prop:"groupIdPath"}},[a("el-cascader",{attrs:{options:e.editGroupTreeData,props:e.editGroupTreeDefaultProps,clearable:"","change-on-select":"",filterable:"",placeholder:"请选择主要分组"},on:{change:e.handleGroupCascaderChange},model:{value:e.mainForm.groupIdPath,callback:function(t){e.$set(e.mainForm,"groupIdPath",t)},expression:"mainForm.groupIdPath"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"主要角色",prop:"roleId"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择主要角色"},model:{value:e.mainForm.roleId,callback:function(t){e.$set(e.mainForm,"roleId",t)},expression:"mainForm.roleId"}},e._l(e.editGroupRoleListData,function(e){return a("el-option",{key:e.roleId,attrs:{label:e.name,value:e.roleId}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"用户名",prop:"username"}},[a("el-input",{ref:"username",attrs:{autocomplete:"off",placeholder:"请输入用户名"},model:{value:e.mainForm.username,callback:function(t){e.$set(e.mainForm,"username","string"==typeof t?t.trim():t)},expression:"mainForm.username"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"状态",required:!0}},[a("xl-userStatusRadioGroup",{model:{value:e.mainForm.status,callback:function(t){e.$set(e.mainForm,"status",t)},expression:"mainForm.status"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"登录密码",prop:"password",required:!e.editActive}},[a("el-input",{attrs:{type:"password",placeholder:e.editActive?"如果不修改密码，请保持为空":"请输入登录密码","show-password":""},model:{value:e.mainForm.password,callback:function(t){e.$set(e.mainForm,"password",t)},expression:"mainForm.password"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"确认密码",prop:"passwordConfirm",required:!e.editActive}},[a("el-input",{attrs:{type:"password",placeholder:e.editActive?"如果不修改密码，请保持为空":"请输入确认密码","show-password":""},model:{value:e.mainForm.passwordConfirm,callback:function(t){e.$set(e.mainForm,"passwordConfirm",t)},expression:"mainForm.passwordConfirm"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"昵称"}},[a("el-input",{attrs:{type:"text"},model:{value:e.mainForm.displayName,callback:function(t){e.$set(e.mainForm,"displayName",t)},expression:"mainForm.displayName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"真实名称"}},[a("el-input",{attrs:{type:"text"},model:{value:e.mainForm.realName,callback:function(t){e.$set(e.mainForm,"realName",t)},expression:"mainForm.realName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"真实名称是否验证"}},[a("el-switch",{model:{value:e.mainForm.realNameIsValid,callback:function(t){e.$set(e.mainForm,"realNameIsValid",t)},expression:"mainForm.realNameIsValid"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[a("el-input",{attrs:{type:"text"},model:{value:e.mainForm.email,callback:function(t){e.$set(e.mainForm,"email",t)},expression:"mainForm.email"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"邮箱是否验证"}},[a("el-switch",{model:{value:e.mainForm.emailIsValid,callback:function(t){e.$set(e.mainForm,"emailIsValid",t)},expression:"mainForm.emailIsValid"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"手机号码",prop:"mobile"}},[a("el-input",{attrs:{type:"text"},model:{value:e.mainForm.mobile,callback:function(t){e.$set(e.mainForm,"mobile",t)},expression:"mainForm.mobile"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"手机号码是否验证"}},[a("el-switch",{model:{value:e.mainForm.mobileIsValid,callback:function(t){e.$set(e.mainForm,"mobileIsValid",t)},expression:"mainForm.mobileIsValid"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"描述"}},[a("el-input",{attrs:{type:"textarea",rows:2},model:{value:e.mainForm.description,callback:function(t){e.$set(e.mainForm,"description","string"==typeof t?t.trim():t)},expression:"mainForm.description"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"是否是开发人员"}},[a("el-switch",{model:{value:e.mainForm.isDeveloper,callback:function(t){e.$set(e.mainForm,"isDeveloper",t)},expression:"mainForm.isDeveloper"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"是否是测试人员"}},[a("el-switch",{model:{value:e.mainForm.isTester,callback:function(t){e.$set(e.mainForm,"isTester",t)},expression:"mainForm.isTester"}})],1)],1),e._v(" "),a("el-tab-pane",{attrs:{label:"附加分组",name:"second"}},[a("el-form-item",{attrs:{label:"附加分组"}},[a("el-tree",{ref:"editGroupTree",attrs:{data:e.editGroupTreeData,props:e.editGroupTreeDefaultProps,"node-key":"id","empty-text":"","show-checkbox":"","default-expand-all":"","check-strictly":""},on:{"check-change":e.handleGroupTreeCheckChange}})],1)],1),e._v(" "),a("el-tab-pane",{attrs:{label:"附加角色",name:"third"}},[a("el-form-item",{attrs:{label:"附加角色"}},[a("el-checkbox-group",{model:{value:e.mainForm.roleIds,callback:function(t){e.$set(e.mainForm,"roleIds",t)},expression:"mainForm.roleIds"}},e._l(e.editRoleListData,function(t){return a("el-checkbox",{key:t.roleId,attrs:{label:t.roleId}},[e._v(e._s(t.name))])}),1)],1)],1),e._v(" "),a("el-tab-pane",{attrs:{label:"附加权限",name:"fourth"}},[a("el-form-item",{attrs:{label:"附加权限"}},[a("el-tree",{ref:"editPermissionTree",attrs:{data:e.editPermissionTreeData,props:e.editPermissionTreeDefaultProps,"node-key":"id","empty-text":"","show-checkbox":"","default-expand-all":"","check-strictly":""},on:{"check-change":e.handlePermissionTreeCheckChange}})],1)],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){return e.handleMainFormSure(!1)}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.handleMainFormSure(!0)}}},[e._v("确 定")])],1)],1)],1),e._v(" "),a("el-footer",{staticClass:"footer"},[e.page.totalItemCount?a("el-pagination",{attrs:{"current-page":e.searchCriteriaForm.pagingInfo.pageNumber,"page-sizes":[20,50,100,200,400],"page-size":e.searchCriteriaForm.pagingInfo.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.page.totalItemCount},on:{"size-change":e.handlePaginationSizeChange,"current-change":e.handlePaginationCurrentChange}}):e._e()],1)],1)},staticRenderFns:[]};t.a=i},jvjI:function(e,t){},uzdP:function(e,t,a){"use strict";var i=a("dZjg"),r=a("iFzH"),o=function(e){a("jvjI")},n=a("VU/8")(i.a,r.a,!1,o,null,null);t.a=n.exports}},["Q+Zd"]);
//# sourceMappingURL=index.js.map